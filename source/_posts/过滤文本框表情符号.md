---
title: å¦‚ä½•ä½¿ç”¨ js è¿‡æ»¤æ–‡æœ¬æ¡†è¡¨æƒ…ç¬¦å·
description: åœ¨åšæŸä¸€åå°ç®¡ç†é¡¹ç›®æ—¶ï¼Œç”±äºå‘é€è¯·æ±‚æ—¶ï¼Œè‹¥ç”¨æˆ·åœ¨æ–‡æœ¬æ¡†è¾“å…¥è¡¨æƒ…ç¬¦å·ï¼Œæäº¤çš„æ•°æ®åœ¨æ’å…¥æ•°æ®åº“ä¼šæŠ¥é”™ï¼Œå› æ­¤éœ€è¦å‰åç«¯å¯¹ï¼Œç”¨æˆ·è¾“å…¥çš„æ–‡æœ¬æ¡†çš„å€¼è¿›è¡Œæ ¡éªŒï¼›æ­¤ç¯‡æ–‡ç« åªåˆ†äº«å‰ç«¯å¦‚ä½•è¿›è¡Œè¡¨å•æ ¡éªŒï¼›
headimg: /images/antd.jpeg
categories:
  - AntDesign
date: 2021-05-28
tags:
  - antDesign
sidebar: [toc] # æ”¾ç½®ä»»ä½•ä½ æƒ³è¦æ˜¾ç¤ºçš„ä¾§è¾¹æ éƒ¨ä»¶
---

# é—®é¢˜äº§ç”ŸèƒŒæ™¯

åœ¨åšæŸä¸€åå°ç®¡ç†é¡¹ç›®æ—¶ï¼Œç”±äºå‘é€è¯·æ±‚æ—¶ï¼Œè‹¥ç”¨æˆ·åœ¨æ–‡æœ¬æ¡†è¾“å…¥è¡¨æƒ…ç¬¦å·ï¼Œæäº¤çš„æ•°æ®åœ¨æ’å…¥æ•°æ®åº“ä¼šæŠ¥é”™ï¼Œå› æ­¤éœ€è¦å‰åç«¯å¯¹ï¼Œç”¨æˆ·è¾“å…¥çš„æ–‡æœ¬æ¡†çš„å€¼è¿›è¡Œæ ¡éªŒï¼›æ­¤ç¯‡æ–‡ç« åªåˆ†äº«å‰ç«¯å¦‚ä½•è¿›è¡Œè¡¨å•æ ¡éªŒï¼›
å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
{% asset_img emo1.png %}

# è§£å†³åŠæ³•

ç”±äºäº§å“è¦æ±‚é¡¹ç›®ä¸­çš„æ‰€æœ‰æ–‡æœ¬æ¡†éƒ½éœ€è¦è¿›è¡Œ emoji é™åˆ¶ï¼Œå› æ­¤æˆ‘å°è£…äº†ä¸€ä¸ªå·¥å…·å‡½æ•°ï¼Œä½œä¸ºè¡¨å•çš„è‡ªå®šä¹‰æ ¡éªŒè§„åˆ™ï¼Œå°è£…çš„å·¥å…·å‡½æ•°ä»£ç å¦‚ä¸‹ï¼Œå¤§å®¶å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼š

```javascript
// åˆ¤æ–­æ–‡æœ¬ä¸­æ˜¯å¦æœ‰è¡¨æƒ…
const isEmojiCharacter = (substring: any) => {
  if (substring?.length > 0) {
    for (var i = 0; i < substring.length; i++) {
      var hs = substring.charCodeAt(i)
      if (0xd800 <= hs && hs <= 0xdbff) {
        if (substring.length > 1) {
          var ls = substring.charCodeAt(i + 1)
          var uc = (hs - 0xd800) * 0x400 + (ls - 0xdc00) + 0x10000
          if (0x1d000 <= uc && uc <= 0x1f77f) {
            return true
          }
        }
      } else if (substring.length > 1) {
        var ls = substring.charCodeAt(i + 1)
        if (ls == 0x20e3) {
          return true
        }
      } else {
        if (0x2100 <= hs && hs <= 0x27ff) {
          return true
        } else if (0x2b05 <= hs && hs <= 0x2b07) {
          return true
        } else if (0x2934 <= hs && hs <= 0x2935) {
          return true
        } else if (0x3297 <= hs && hs <= 0x3299) {
          return true
        } else if (
          hs == 0xa9 ||
          hs == 0xae ||
          hs == 0x303d ||
          hs == 0x3030 ||
          hs == 0x2b55 ||
          hs == 0x2b1c ||
          hs == 0x2b1b ||
          hs == 0x2b50
        ) {
          return true
        }
      }
    }
  }
}
```

ä»¥ä¸Šå‡½æ•°æ¥æ”¶ä¸€ä¸ªæ–‡æœ¬æ¡†çš„å€¼ï¼Œè‹¥æ–‡æœ¬æ¡†æœ‰è¡¨æƒ…å°±è¿”å› true , åœ¨å®é™…é¡¹ç›®ä¸­æˆ‘ä»¬å¯ä»¥æ ¹æ® Form.Item çš„ rules å±æ€§è‡ªå®šä¹‰æ ¡éªŒè§„åˆ™ï¼Œä»£ç å¦‚ä¸‹ï¼š

```javascript
<Form.Item
  rules={[
    {
      validator: (_, value) => {
        const isEmoji = isEmojiCharacter(value)
        console.log('12123', isEmoji)
        return !isEmoji ? Promise.resolve() : Promise.reject(new Error('ä¸å…è®¸è¾“å…¥è¡¨æƒ…ç¬¦å·'))
      },
      validateTrigger: 'onChange'
    }
  ]}
  label="æ¥å£åç§°"
  style={{marginLeft: 20}}
  name="interName">
  <Input allowClear placeholder="è¯·è¾“å…¥æ¥å£åç§°" />
</Form.Item>
```

è‡³æ­¤ä¾¿å¯ä»¥å®ç°äº†å‰ç«¯æ–‡æœ¬æ¡† emoji çš„æ ¡éªŒ~~

# å†™åœ¨æœ€å

ä»¥ä¸Šæä¾›çš„æ–¹æ³•ï¼Œä¾¿æ˜¯è§£å†³æ ¡éªŒæ–‡æœ¬æ¡†è¡¨æƒ…ç¬¦å·çš„æ–¹æ³•ï¼Œä½†æ˜¯ä»ç„¶å­˜åœ¨éƒ¨åˆ†è¡¨æƒ…ä¸èƒ½æ ¡éªŒçš„é—®é¢˜ï¼Œå¦‚è‹¥æœ‰å®Œå…¨çš„è¡¨æƒ…æ ¡éªŒæ–¹æ³•ï¼Œæ¬¢è¿è¯„è®ºåŒºç•™è¨€äº¤æµï¼›

> ğŸ¥‚(âÂ´â—¡`â)æ‚¨çš„<font  color=red size=3>ç‚¹èµ</font>ğŸ‘â•<font  color=red size=3>è¯„è®º</font>ğŸ“â•<font  color=red size=3>æ”¶è—</font>â­ æ˜¯ä½œè€…åˆ›ä½œçš„æœ€å¤§åŠ¨åŠ› ğŸ¤
